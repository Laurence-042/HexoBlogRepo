---
title: Python笔记-特殊变量
date: 2018-07-26 15:14:26
tags: [Python, 笔记]
---
本文是这个鶸学Python时深刻意识到自己的记性有多差之后写出来的······
<!--more-->

记录特殊变量的使用方式。  
准备用到一个记一个，所以现在写在这里的这些应该不全

顺便在这里记一下带下划线的变量的含义
> 1.`__xx`，私有变量(private)，只有内部可以访问，外部不能访问  
> 2.`__xx__`，特殊变量，特殊变量是可以直接访问的，它不是private变量  
> 3.`_x`，按照约定俗成的规定，虽然可以被外部访问，但是建议视为私有变量，不要随意访问

---

|变量名|类型|作用    |起效方式(假定对象为a,是A类的实例)|
|:------:|:---------|:-------|:-------------------|
|`__doc__` |属性|类的描述信息|`a.__doc__`|
|`__module__`|属性|对象所在的模块|`a.__module__`|
|`__class__`|属性|对象所属的类|`a.__class__`|
|`__slots__`|属性|一个指定当前类实例化的对象的所有可用的变量的列表,</br>包括实例化后可绑定的变量</br>（不影响子类）|`__slots__ = ['test', 'a'] #写于类的声明中`|
|`__init__`|方法|构造方法，通过类创建对象自动执行|`a = A()`|
|`__del__`|方法|析构方法，当前对象在内存中被释放自动执行|`del a #或程序终止时变量全被清除时被自动执行`|
|`__str__`|方法|打印字符串，<br>类似于Java的`toString()`<br>一般用于输出|`print(a)`|
|`__repr__`|方法|打印字符串，<br>类似于Java的`toString()`<br>一般用于调试|`a`|
|`__iter__`|方法|使类可迭代，与`__next__`一起使用|`for n in A():`<br>&nbsp;&nbsp;&nbsp;&nbsp;`print(n)`|
|`__next__`|方法|使类可迭代，与`__iter__`一起使用|`for n in A():`<br>&nbsp;&nbsp;&nbsp;&nbsp;`print(n)`|
|`__getitem__`|方法|使类可以像list一样获取指定索引位置的元素|`a[1]`|
|`__setitem__`|方法|使类可以像list一样赋值指定索引位置的元素|`a[1] = 6`|
|`__delitem__`|方法|使类可以像list一样删除指定索引位置的元素|`del a[1]`|
|`__getattr__`|方法|当找不到调用的属性时动态返回属性|`a.b #A里没有属性b`|
|`__call__`|方法|使实例化的对象“可调用”<br>可用`callable()`判断是否可调用|`a()`|

---

难点示例：用完全动态的`__getattr__`写链式调用
```python
class Chain(object):

    def __init__(self, path=''):
        self._path = path

    def __getattr__(self, path):
        return Chain('%s/%s' % (self._path, path))

    def __str__(self):
        return self._path

    __repr__ = __str__
```

<!--more-->